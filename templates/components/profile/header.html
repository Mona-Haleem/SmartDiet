{% load static %}

<div id="profile-header">
  <div class="img_container">
    <div id="avatar">
      <input
        x-ref="imgUpload"
        type="file"
        name="avatar_img"
        accept="image/*"
        class="d-none"
        id="id_avatar_img"
        @change="profile.updateAvatarImage()"
      />
      {% if user.avatar_img %}
      <img
        x-ref="avataImg"
        alt="{{user.username}} avatar image"
        src="{{user.avatar_img}}"
        :src="user.avatar_img"
        data-fallback="{% static 'assets/profile.jpg' %}"
        onerror="this.src=this.dataset.fallback;"
        @dblclick="$refs.imgUpload.click()"
      />
      {% else %}
      <img src="{% static 'assets/profile.jpg' %}" @dblclick="$refs.imgUpload.click()"/>
      {% endif %}
    </div>
  </div>
  <h1 x-text="user.username" x-show="!editMode" @dblclick="editMode = true;$data.orgValue=$data.user.username; $refs.nameInput.focus()">{{user.username|capfirst }}</h1>
  <h1 x-show="editMode">    
      <input x-model="user.username" class="form-control" x-ref="nameInput" @blur="profile.updateUserName()">
  </h1>
</div>
